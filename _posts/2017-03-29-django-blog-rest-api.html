---
layout: post
title: Django Blog Tutorial, Rest API
description: Learn how to build a Django blog application, rest api.
excerpt: Django Rest Framework
---

<div class="well">
  <h4>Index</h4>
  <ol>
    <li><a href="#djrf">Install Django Rest Framework</a></li>
    <li><a href="#serialization">Serialization</a></li>
    <li><a href="#viewsets">ViewSets</a></li>
    <li><a href="#urls">URLs</a></li>
  </ol>
</div>

<p>We've finished building the simple functionality of our blog application. We can create, edit and delete the blog posts. Now let's talk about rest api.</p>

<dl>
  <dt>API:</dt>
  <dd>"Application Programming Interface" - to put it simply its a way two different applications can interact with each other. For example, you want to check the current weather in your city. Traditionally you would go to the weather website and browse though it. In other scenario let's say you have an application on your android phone that can inform you about the the current weather in your city. The mobile application contacts the weather website and the later sends the data to the former.</dd>
	<br />
  <dt>REST API:</dt>
  <dd>Set of functions that enables users to create, update or delete data on the server. For example, a blogger can use rest api to create or delete blog posts using a mobile application.</dd>
</dl>
<hr />
<p>So how do we build an api functionality for our blog? The simplest way is to use "django rest framework". We will install it with pip and include it into our project.</p>

<p id="djrf">Run:
<pre><code class="bash">pip install djangorestframework  
</code></pre>
Go ahead and add 'rest_framework' into INSTALLED_APPS:
<pre><code class="python">
INSTALLED_APPS = [
  'blog',
  'account',
  'taggit',
  'rest_framework',
  ...
]  
</code></pre>
</p>

<hr>

<p id="serialization">
Now we are going to do "serialization".
<dl>
  <dd>Serialization:</dd>
  <dl>Converting a python model into a json data.</dl>
</dl>  
Create a file "serializers.py" in the blog directory and create a Post's serializer:
<pre><code class="python">from rest_framework import serializers
from .models import Post


class PostSerializer(serializers.ModelSerializer):
    class Meta:
        model = Post
        fields = ('title', 'body', 'published')  
</code></pre>
In Meta class we define the model which we want to serialize and its fields. If you want to include all fields, change it to "fields = '__all__'".
</p>

<p id="viewsets">Next we are going to determine the viewsets. "ViewSet" is a class-based view that allows us to create, edit or delete database objects. Edit <mark>views.py</mark>:
<pre><code class="python">...
# rest api
from rest_framework import viewsets
from .serializers import PostSerializer
from .models import Post

...
class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
</code></pre>
</p>

<hr>

<p id="urls">Now edit blog's <mark>urls.py</mark>:
<pre><code class="python">
from django.conf.urls import url, include
from rest_framework import routers
from . import views

# api router
router = routers.DefaultRouter()
router.register(r'posts', views.PostViewSet)

urlpatterns = [
    url(r'^$', views.post_list, name='post_list'),
    url(r'(?P<year>\d{4})/(?P<month>\d{2})/(?P<day>\d{2})/(?P<post>[-\w]+)/$',
        views.post_detail,
        name='post_detail'),
    url(r'^tag/(?P<tag_slug>[-\w]+)/$', views.post_list, 
        name='post_list_by_tag'),
    url(r'^api/', include(router.urls))
]  
</code></pre>
We imported "routers" from rest framework and mapped a "posts" url to "PostViewSet". We also append urlpatterns with "api/" url. Now our rest api functionality is pretty much ready to work with.
</p>

<p>Go to "http://127.0.0.1:8000/blog/api/" and you will be welcomed by django rest framework screen. Go to "http://127.0.0.1:8000/blog/api/posts/" link and there you can view all our published posts. You can also add a new one.</p>








